import{r as a,v as P,j as t,M as j,P as A,c as L}from"./vendor-BQlkOAEj.js";import{L as R,P as N,c as D,a as b,b as k,d as v,e as U}from"./index-BHBbs_wF.js";const{Title:G}=L;function Y(){const[s,T]=a.useState("All"),[o,h]=a.useState("All"),[r,i]=a.useState(1),[d]=a.useState(8),[p,m]=a.useState(),[_,u]=a.useState(!0),f=e=>{h(e.key),T(e.key),i(1)};a.useEffect(()=>{let e=!0;async function C(){let l,g={};s==="All"?l=b:(l=k,g={q:"",category:s});try{const c=await D.query({query:l,variables:g});e&&m(c.data._allTrendyProductsMeta.count)}catch(c){console.error("Failed to fetch data:",c)}}return C(),()=>{e=!1}},[s]);const E=s==="All"?v:U,{loading:y,error:S,data:n}=P(E,{variables:{category:o,page:r-1,perPage:d}});if(a.useEffect(()=>{let e;return u(!0),y||(e=setTimeout(()=>{u(!1)},500)),()=>clearTimeout(e)},[y]),S)return t.jsx("p",{children:"Error"});const x=e=>{i(e)};return t.jsx("section",{id:"trendyItems",children:t.jsxs("div",{className:"container",children:[t.jsx(G,{children:"Trendy item"}),t.jsx("div",{className:"tab_categories",children:t.jsx(j,{mode:"horizontal",selectedKeys:[o],onClick:f,items:[{label:"ALL",key:"All"},{label:"FEATURED",key:"Featured"},{label:"BEST SELLING",key:"Best Selling"},{label:"TOP RATED",key:"Top Rated"},{label:"TRENDS",key:"Trends"}]})}),_?t.jsx(R,{}):t.jsx("div",{className:"trendy_container",children:n==null?void 0:n.allTrendyProducts.map(e=>t.jsx("div",{className:"productCard_container",children:t.jsx(N,{trendyProduct:e},e.id)},e.id))},r),t.jsx("div",{className:"pagination",children:t.jsx(A,{hideOnSinglePage:!0,current:r,total:p,pageSize:d,onChange:x})})]})})}export{Y as default};
