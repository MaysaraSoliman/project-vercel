import{r as a,x as P,j as t,M as j,P as A,c as L}from"./vendor-CjS1k59k.js";import{P as R}from"./ProductCard-DRqRh2AD.js";import{a as N,b as D,c as b,d as k}from"./trendyQueries-a2Xa2ff0.js";import{c as U}from"./index-D6LU5W2j.js";import{L as v}from"./Loading-BbUvL5k8.js";const{Title:G}=L;function Q(){const[r,T]=a.useState("All"),[c,m]=a.useState("All"),[s,i]=a.useState(1),[d]=a.useState(8),[p,h]=a.useState(),[f,u]=a.useState(!0),_=e=>{m(e.key),T(e.key),i(1)};a.useEffect(()=>{let e=!0;async function C(){let o,g={};r==="All"?o=N:(o=D,g={q:"",category:r});try{const l=await U.query({query:o,variables:g});e&&h(l.data._allTrendyProductsMeta.count)}catch(l){console.error("Failed to fetch data:",l)}}return C(),()=>{e=!1}},[r]);const E=r==="All"?b:k,{loading:y,error:x,data:n}=P(E,{variables:{category:c,page:s-1,perPage:d}});if(a.useEffect(()=>{let e;return u(!0),y||(e=setTimeout(()=>{u(!1)},500)),()=>clearTimeout(e)},[y]),x)return t.jsx("p",{children:"Error"});const S=e=>{i(e)};return t.jsx("section",{id:"trendyItems",children:t.jsxs("div",{className:"container",children:[t.jsx(G,{children:"Trendy item"}),t.jsx("div",{className:"tab_categories",children:t.jsx(j,{mode:"horizontal",selectedKeys:[c],onClick:_,items:[{label:"ALL",key:"All"},{label:"FEATURED",key:"Featured"},{label:"BEST SELLING",key:"Best Selling"},{label:"TOP RATED",key:"Top Rated"},{label:"TRENDS",key:"Trends"}]})}),f?t.jsx(v,{}):t.jsx("div",{className:"trendy_container",children:n==null?void 0:n.allTrendyProducts.map(e=>t.jsx("div",{className:"productCard_container",children:t.jsx(R,{trendyProduct:e},e.id)},e.id))},s),t.jsx("div",{className:"pagination",children:t.jsx(A,{hideOnSinglePage:!0,current:s,total:p,pageSize:d,onChange:S})})]})})}export{Q as default};
